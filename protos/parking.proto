syntax = "proto3";
package parking;

service ParkingDetector {
  rpc Predict (ImageRequest) returns (PredictResponse) {}
}

message ImageRequest {
  bytes image = 1;      // JPEG bytes
  float conf  = 2;      // threshold
  int32 imgsz = 3;      // e.g. 640
}

message Box {
  float x1 = 1;
  float y1 = 2;
  float x2 = 3;
  float y2 = 4;
  int32 cls = 5;
  float conf = 6;
  string name = 7;
}

message PredictResponse {
  repeated Box boxes = 1;
  int32 free_count = 2;
  int32 occupied_count = 3;
  bytes annotated = 4; // JPEG con overlays
}
